<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AIMAG VR Budget Calculator</title>
  <style>
    :root{
      --bg:#0b0c10; --card:#121420; --muted:#a8adbd; --text:#eef0f6;
      --accent:#c40018; --line:#252a3d; --good:#14b8a6;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      background: radial-gradient(1200px 800px at 10% 0%, #14162a 0%, var(--bg) 45%),
                  radial-gradient(900px 700px at 90% 15%, #1b0b12 0%, var(--bg) 55%);
      color:var(--text);
    }
    header{
      padding:28px 18px 10px;
      max-width:1100px; margin:0 auto;
    }
    .title{display:flex; gap:12px; align-items:flex-end; flex-wrap:wrap;}
    h1{margin:0; font-size:22px; letter-spacing:.3px}
    .pill{
      background: rgba(196,0,24,.16); border:1px solid rgba(196,0,24,.35);
      color:#ffd7dc; padding:6px 10px; border-radius:999px; font-size:12px;
    }
    .sub{margin:10px 0 0; color:var(--muted); line-height:1.45; font-size:14px}
    main{max-width:1100px; margin:0 auto; padding:16px 18px 30px;}
    .grid{display:grid; grid-template-columns: 1.35fr .95fr; gap:14px;}
    @media (max-width: 920px){ .grid{grid-template-columns:1fr;} }
    .card{
      background: rgba(18,20,32,.88);
      border:1px solid rgba(37,42,61,.9);
      border-radius:18px;
      padding:16px;
      box-shadow: 0 10px 30px rgba(0,0,0,.25);
      position: relative;
      z-index: 0;
    }
    .card h2{margin:0 0 10px; font-size:14px; letter-spacing:.14em; text-transform:uppercase; color:#f3f4f8}
    .row{display:grid; grid-template-columns: 1fr 1fr; gap:10px;}
    @media (max-width: 520px){ .row{grid-template-columns:1fr;} }
    label{display:block; font-size:13px; color:var(--muted); margin:10px 0 6px}
    select, input[type="number"], input[type="text"]{
      width:100%;
      padding:10px 11px;
      border-radius:12px;
      border:1px solid rgba(37,42,61,.95);
      background: rgba(8,10,18,.55);
      color: var(--text);
      outline:none;
      position: relative;
      z-index: 5;
    }
    select:focus, input:focus{border-color: rgba(196,0,24,.7); box-shadow: 0 0 0 4px rgba(196,0,24,.12);}
    .checks{display:flex; flex-direction:column; gap:8px; margin-top:6px}
    .check{
      display:flex; gap:10px; align-items:flex-start;
      padding:10px 10px; border:1px solid rgba(37,42,61,.8);
      border-radius:14px; background: rgba(8,10,18,.35);
    }
    .check input{margin-top:2px; transform: scale(1.05);}
    .check .name{font-size:13px; color: var(--text);}
    .check .meta{font-size:12px; color:var(--muted); margin-top:2px; line-height:1.35}
    .muted{color:var(--muted); font-size:12px; line-height:1.35}
    .hr{height:1px; background:rgba(37,42,61,.9); margin:14px 0;}
    .total{
      display:flex; justify-content:space-between; align-items:flex-end; gap:14px; flex-wrap:wrap;
    }
    .total .big{font-size:28px; font-weight:800; letter-spacing:.2px}
    .total .big span{color:#ffecf0}
    .btns{display:flex; gap:10px; flex-wrap:wrap}
    button{
      cursor:pointer;
      border:1px solid rgba(37,42,61,.9);
      background: rgba(8,10,18,.35);
      color:var(--text);
      padding:10px 12px;
      border-radius:14px;
      font-weight:600;
    }
    button.primary{
      background: linear-gradient(135deg, rgba(196,0,24,.95), rgba(196,0,24,.70));
      border-color: rgba(196,0,24,.9);
    }
    button:hover{filter:brightness(1.05)}
    .breakdown{margin-top:12px; font-size:13px}
    .line{
      display:flex; justify-content:space-between; gap:12px;
      padding:8px 0; border-bottom:1px dashed rgba(37,42,61,.75);
    }
    .line:last-child{border-bottom:none}
    .tag{
      font-size:11px; padding:4px 8px; border-radius:999px;
      border:1px solid rgba(37,42,61,.9);
      color:var(--muted);
    }
    .ok{border-color: rgba(20,184,166,.5); color:#bff7ef; background: rgba(20,184,166,.08)}
    .warn{border-color: rgba(196,0,24,.45); color:#ffd7dc; background: rgba(196,0,24,.10)}
    footer{max-width:1100px; margin:0 auto; padding:0 18px 22px; color:var(--muted); font-size:12px;}
    code.small{font-family: ui-monospace, SFMono-Regular, Menlo, monospace; font-size:12px; color:#cfd3e3;}
  </style>
</head>
<body>
<header>
  <div class="title">
    <h1>AIMAG VR Broadcast — Budget Calculator</h1>
    <span class="pill">Single-file • Shareable • No backend</span>
  </div>
<div class="sub">
  <p>
    Select option combinations from your cost breakdown table (headsets, features, VR booths, cameras, capture days).
    Capture-day selection applies a discount to the camera package.
  </p>

  <p><strong>5 parameters make the cost vary:</strong></p>

  <ol>
    <li>The number of headsets the broadcast is available on.</li>
    <li>Features available on the VR broadcasting app.</li>
    <li>The number of VR booths constructed in Riyadh for the distribution.</li>
    <li>The number of cameras and therefore the number of operators deployed behind them.</li>
    <li>The number of days we capture and broadcast.</li>
  </ol>
</div>
</header>

<main>
  <div class="grid">
    <!-- Inputs -->
    <section class="card">
      <h2>Inputs</h2>

      <div class="row">
        <div>
          <label>Project / Client name (optional)</label>
          <input id="projectName" type="text" placeholder="AIMAG 2026 — Riyadh" />
        </div>
        <div>
          <label>Currency</label>
          <select id="currency">
            <option value="EUR" selected>EUR (€)</option>
          </select>
        </div>
      </div>

      <div class="hr"></div>

      <h2>1) Headsets the app is available on</h2>
      <div class="checks" id="headsetsChecks"></div>
      <div class="muted">Each selected headset platform adds the corresponding app/authentication cost from the table.</div>

      <div class="hr"></div>

      <h2>2) Optional App features</h2>
      <div class="checks" id="featuresChecks"></div>

      <div class="hr"></div>

      <h2>3) VR Booths (Riyadh)</h2>
      <div class="row">
        <div>
          <label>Number of booths to build</label>
          <input id="boothCount" type="number" min="0" step="1" value="0" />
          <div class="muted" style="margin-top:6px;">
            Booth construction is fixed at <b>€30k per booth</b>. Supervision is mandatory.
          </div>
        </div>
        <div>
          <label>Samsung headsets per booth</label>
          <input id="headsetsPerBooth" type="number" min="0" step="1" value="0" />
          <div class="muted" style="margin-top:6px;">Table: <b>€2k per headset</b> (hardware).</div>
        </div>
      </div>

<div class="row">
  <div>
    <label>Supervision of construction and hosting</label>
    <input id="supervisionLocked" type="text" value="Included (mandatory) — €15k" readonly />
    <div class="muted" style="margin-top:6px;">Table: <b>€15k</b> supervision.</div>
  </div>
</div>

      <div class="hr"></div>

      <h2>4) Cameras package</h2>
      <label>Camera coverage option</label>
      <select id="cameraPackage"></select>
      <div class="muted" id="cameraHint" style="margin-top:6px;"></div>

      <div class="hr"></div>

      <h2>5) Capture days (camera discount)</h2>
      <label>Capture days option</label>
      <select id="captureDays"></select>
      <div class="muted" id="daysHint" style="margin-top:6px;"></div>
    </section>

    <!-- Output -->
    <aside class="card">
      <h2>Budget</h2>

      <div class="total">
        <div>
          <div class="muted" id="summaryLine">Select options to compute the total.</div>
          <div class="big">
  <span id="totalValue">€0</span>
  <div class="muted" id="totalValueSar" style="margin-top:6px;">
    ≈ SAR 0
  </div>
</div>
        </div>
        <div class="btns">
          <button class="primary" id="copySummary">Copy summary</button>
          <button id="reset">Reset</button>
        </div>
      </div>

      <div class="hr"></div>

      <div style="display:flex; gap:10px; align-items:center; flex-wrap:wrap;">
        <span class="tag ok" id="discountTag">No discount</span>
        <span class="tag" id="boothCountTag">Booths: 0</span>
        <span class="tag" id="headsetCountTag">Samsung headsets: 0</span>
      </div>

      <div class="hr"></div>

      <h2>Breakdown</h2>
      <div class="breakdown" id="breakdown"></div>

      <div class="hr"></div>

      <div class="muted">
        <b>Notes</b><br/>
        • Capture-day selection applies a percentage reduction to the <b>camera package</b> (as in your table).<br/>
        • VR booths include: base package + fixed construction + headset hardware + mandatory supervision.<br/>
        • Edit the numbers in the <code class="small">DATA</code> object in the file if your table evolves.
      </div>
    </aside>
  </div>
</main>

<footer>
  Tip to share: upload this file as <code class="small">index.html</code> to GitHub Pages / Netlify / Vercel for a shareable link.
</footer>

<script>
  // =========
  // DATA (from your table)
  // =========
  const DATA = {
    headsets: [
      { id:"meta",   name:"Meta",   cost:100000, desc:"VR app for 8k+ broadcast, replays, AIMAG branded, with user authentication for Meta" },
      { id:"samsung",name:"Samsung",cost:100000, desc:"VR app for 8k+ broadcast, replays, AIMAG branded, with user authentication for Samsung" },
      { id:"pico",   name:"Pico",   cost:100000, desc:"VR app for 8k+ broadcast, replays, AIMAG branded, with user authentication for Pico" },
      { id:"apple",  name:"Apple",  cost:100000, desc:"VR app for 8k+ broadcast, replays, AIMAG branded, with user authentication for Apple" },
    ],
    features: [
      { id:"multiview", name:"Multiviewer + viewing rooms integration", cost: 50000 },
      { id:"sponsor",   name:"Bespoke sponsor waiting rooms, stores & VR activations", cost: 75000 },
      { id:"stats2d",   name:"2D broadcast + live stats integration", cost: 50000 },
      { id:"spatialai", name:"Spatial audio + AI labial translation", cost: 50000 },
    ],
    boothExtras: {
      // Fixed per your request:
      buildCostPerBooth: 30000,
      costPerSamsungHeadset: 2000,
      supervisionMandatory: 15000,
    },
    cameraPackages: [
      { id:"none", label:"No cameras selected", cost:0 },
      { id:"c250", label:"4 fixed + 1 mobile (2D intermittent coverage, one sport at a time)", cost:250000 },
      { id:"c335", label:"6 fixed points of view + 1 mobile (2D coverage, one sport at a time)", cost:335000 },
      { id:"c415", label:"8 fixed + 1 mobile (3D full coverage, one sport at a time)", cost:415000 },
      { id:"c547", label:"16 fixed + 2 mobile (3D full coverage, two sports at a time)", cost:547000 },
    ],
    captureDays: [
      { id:"d2",  label:"Opening ceremony + first 2 days",  discountPct:60, days:2 },
      { id:"d4",  label:"Opening ceremony + first 4 days",  discountPct:40, days:4 },
      { id:"d7",  label:"Opening ceremony + first 7 days",  discountPct:20, days:7 },
      { id:"d11", label:"Full competition (opening + closing 11 days)", discountPct:0, days:11 },
    ],
  };

  // =========
  // Helpers
  // =========
  const fmtEUR = (n) => {
    const v = Math.round(n);
    return "€" + v.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
  };
  const qs = (id) => document.getElementById(id);
  const EUR_TO_SAR = 4.05; // reference exchange rate

  function renderChecks(containerId, items, key="id") {
    const container = qs(containerId);
    container.innerHTML = "";
    items.forEach(it => {
      const wrap = document.createElement("div");
      wrap.className = "check";
      wrap.innerHTML = `
        <input type="checkbox" id="${containerId}_${it[key]}">
        <div>
          <div class="name">${it.name || it.label}</div>
          <div class="meta">${it.desc ? it.desc + " • " : ""}${fmtEUR(it.cost || it.baseCost || 0)}</div>
        </div>
      `;
      container.appendChild(wrap);
    });
  }

  function renderSelect(selectId, items, getLabel, getValue) {
    const sel = qs(selectId);
    sel.innerHTML = "";
    items.forEach(it => {
      const opt = document.createElement("option");
      opt.value = getValue(it);
      opt.textContent = getLabel(it);
      sel.appendChild(opt);
    });
  }

  function init() {
    renderChecks("headsetsChecks", DATA.headsets);
    renderChecks("featuresChecks", DATA.features);


    renderSelect(
      "cameraPackage",
      DATA.cameraPackages,
      it => `${it.label} — ${fmtEUR(it.cost)}`,
      it => it.id
    );

    renderSelect(
      "captureDays",
      DATA.captureDays,
      it => `${it.label} — ${it.discountPct ? "-" + it.discountPct + "% camera price" : "no discount"}`,
      it => it.id
    );

    // Defaults
    qs("cameraPackage").value = "none";
    qs("captureDays").value = "d11";

    // Wire events
    document.querySelectorAll("input, select").forEach(el => {
      el.addEventListener("input", compute);
      el.addEventListener("change", compute);
    });

    qs("reset").addEventListener("click", () => {
      DATA.headsets.forEach(h => qs(`headsetsChecks_${h.id}`).checked = false);
      DATA.features.forEach(f => qs(`featuresChecks_${f.id}`).checked = false);

      qs("boothCount").value = 0;
      qs("headsetsPerBooth").value = 0;

      qs("cameraPackage").value = "none";
      qs("captureDays").value = "d11";

      qs("projectName").value = "";
      compute();
    });

    qs("copySummary").addEventListener("click", async () => {
      const text = buildSummaryText();
      try{
        await navigator.clipboard.writeText(text);
        qs("copySummary").textContent = "Copied!";
        setTimeout(()=> qs("copySummary").textContent = "Copy summary", 900);
      }catch(e){
        alert("Could not copy automatically. Summary:\\n\\n" + text);
      }
    });

    compute();
  }

  function getSelectedHeadsets() {
    return DATA.headsets.filter(h => qs(`headsetsChecks_${h.id}`).checked);
  }
  function getSelectedFeatures() {
    return DATA.features.filter(f => qs(`featuresChecks_${f.id}`).checked);
  }
  function getCameraPackage() {
    const id = qs("cameraPackage").value;
    return DATA.cameraPackages.find(c => c.id === id) || DATA.cameraPackages[0];
  }
  function getCaptureDays() {
    const id = qs("captureDays").value;
    return DATA.captureDays.find(d => d.id === id) || DATA.captureDays[DATA.captureDays.length-1];
  }

  function compute() {
    const headsets = getSelectedHeadsets();
    const features = getSelectedFeatures();

    const boothCount = Math.max(0, parseInt(qs("boothCount").value || "0", 10));
    const samsungHeadsetsPerBooth = Math.max(0, parseInt(qs("headsetsPerBooth").value || "0", 10));

    const cameraPkg = getCameraPackage();
    const days = getCaptureDays();

    // Headsets (platform apps/auth)
    const headsetsCost = headsets.reduce((s, h) => s + h.cost, 0);

    // Features
    const featuresCost = features.reduce((s, f) => s + f.cost, 0);

    // VR booths
    const boothBuildCost = DATA.boothExtras.buildCostPerBooth * boothCount; // fixed 30k
    const totalSamsungHeadsets = boothCount * samsungHeadsetsPerBooth;
    const headsetHardwareCost = totalSamsungHeadsets * DATA.boothExtras.costPerSamsungHeadset;

    // Supervision mandatory: count once (not per booth) unless you want per booth later
    const supervisionCost = boothCount > 0 ? DATA.boothExtras.supervisionMandatory : 0;

    // Cameras with capture-day discount
    const discountPct = typeof days.discountPct === "number" ? days.discountPct : 0;
    const discountMultiplier = (100 - discountPct) / 100;
    const cameraCostDiscounted = cameraPkg.id !== "none"
      ? cameraPkg.cost * discountMultiplier
      : 0;

    const total = [
      headsetsCost,
      featuresCost,
      boothBuildCost,
      headsetHardwareCost,
      supervisionCost,
      cameraCostDiscounted
    ].reduce((sum, v) => sum + (Number.isFinite(v) ? v : 0), 0);

    // Hints/tags
    qs("cameraHint").textContent = cameraPkg.id === "none"
      ? "Select a camera package to include production costs."
      : `Capture days will apply the table discount to this package.`;
    qs("daysHint").textContent = discountPct
      ? `Discount applied: -${discountPct}% on camera package (${days.days} day option).`
      : `No discount applied (${days.days} day option).`;

    qs("discountTag").textContent = discountPct ? `Camera discount: -${discountPct}%` : "No discount";
    qs("discountTag").className = "tag " + (cameraPkg.id !== "none" && discountPct ? "ok" : "warn");
    qs("boothCountTag").textContent = `Booths: ${boothCount}`;
    qs("headsetCountTag").textContent = `Samsung headsets: ${totalSamsungHeadsets}`;

    // Summary line
    const pName = qs("projectName").value.trim();
    const summaryBits = [];
    if (headsets.length) summaryBits.push(`${headsets.length} headset platform(s)`);
    if (features.length) summaryBits.push(`${features.length} feature(s)`);
    if (boothCount) summaryBits.push(`${boothCount} booth(s)`);
    if (cameraPkg.id !== "none") summaryBits.push(`camera package + ${days.days} day option`);
    qs("summaryLine").textContent = (pName ? pName + " — " : "") + (summaryBits.length ? summaryBits.join(" • ") : "No options selected");

    // Breakdown
    const lines = [];
    if (headsetsCost) lines.push(["Headset platforms (apps/auth)", headsets.map(h=>h.name).join(", "), headsetsCost]);
    if (featuresCost) lines.push(["Features", features.map(f=>f.name).join(", "), featuresCost]);

    if (boothCount > 0) {
      lines.push(["VR booths — construction", `${boothCount} × ${fmtEUR(DATA.boothExtras.buildCostPerBooth)}`, boothBuildCost]);
      if (headsetHardwareCost) lines.push(["VR booths — Samsung headsets (hardware)", `${totalSamsungHeadsets} × ${fmtEUR(DATA.boothExtras.costPerSamsungHeadset)}`, headsetHardwareCost]);
      lines.push(["VR booths — supervision (mandatory)", "Included", supervisionCost]);
    }

    if (cameraPkg.id !== "none") {
      const original = cameraPkg.cost || 0;
      const discounted = cameraCostDiscounted;
      const note = discountPct ? `${fmtEUR(original)} → ${fmtEUR(discounted)} (-${discountPct}%)` : `${fmtEUR(original)} (no discount)`;
      lines.push(["Cameras (after capture-day discount)", note, discounted]);
    }

    qs("breakdown").innerHTML = lines.length
      ? lines.map(([title, note, value]) => `
          <div class="line">
            <div>
              <div style="font-weight:700">${title}</div>
              <div class="muted">${note}</div>
            </div>
            <div style="font-weight:800">${fmtEUR(value)}</div>
          </div>
        `).join("")
      : `<div class="muted">Pick at least one option to see the breakdown.</div>`;

    qs("totalValue").textContent = fmtEUR(total);

const totalSar = Math.round(total * EUR_TO_SAR);
qs("totalValueSar").textContent =
  "≈ SAR " + totalSar.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
  }

  function buildSummaryText(){
    const pName = qs("projectName").value.trim() || "Project";
    const headsets = getSelectedHeadsets();
    const features = getSelectedFeatures();

    const boothCount = Math.max(0, parseInt(qs("boothCount").value || "0", 10));
    const samsungPerBooth = Math.max(0, parseInt(qs("headsetsPerBooth").value || "0", 10));

    const cameraPkg = getCameraPackage();
    const days = getCaptureDays();

    const totalText = qs("totalValue").textContent;

    const lines = [];
    lines.push(`${pName} — Budget Summary`);
    lines.push(`Total: ${totalText}`);
    lines.push("");

    if (headsets.length) lines.push(`Headset platforms: ${headsets.map(h=>h.name).join(", ")} (${fmtEUR(headsets.reduce((s,h)=>s+h.cost,0))})`);
    if (features.length) lines.push(`Features: ${features.map(f=>f.name).join(", ")} (${fmtEUR(features.reduce((s,f)=>s+f.cost,0))})`);

    if (boothCount){
      const build = DATA.boothExtras.buildCostPerBooth;
      const totalSamsung = boothCount * samsungPerBooth;
    lines.push(`VR Booths: ${boothCount} booth(s)`);
      lines.push(`  - Construction: ${boothCount} × ${fmtEUR(build)}`);
      lines.push(`  - Samsung headsets (hardware): ${totalSamsung} × ${fmtEUR(DATA.boothExtras.costPerSamsungHeadset)}`);
      lines.push(`  - Supervision (mandatory): ${fmtEUR(DATA.boothExtras.supervisionMandatory)}`);
    }

    if (cameraPkg.id !== "none"){
      lines.push(`Cameras: ${cameraPkg.label}`);
      lines.push(`Capture days: ${days.label} (camera discount: ${days.discountPct ? "-" + days.discountPct + "%" : "none"})`);
    }

    return lines.join("\n");
  }

  init();
</script>
</body>
</html>
